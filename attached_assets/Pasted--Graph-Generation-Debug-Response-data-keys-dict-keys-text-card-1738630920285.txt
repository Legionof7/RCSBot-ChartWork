
=====================


=== Graph Generation Debug ===
Response data keys: dict_keys(['text', 'cards', 'quick_replies', 'graph'])
Graph data found: {
  "type": "bar",
  "data": {
    "type": "bar",
    "config": {
      "data": [
        {
          "x": "HDL",
          "y": 55
        },
        {
          "x": "Normal Range",
          "y": 52.5
        }
      ],
      "title": "HDL Cholesterol",
      "xlabel": "Measurement",
      "ylabel": "mg/dL",
      "referenceLines": {
        "Normal Range": 52.5
      }
    }
  }
}
Attempting to generate bar graph with data:
{
  "type": "bar",
  "config": {
    "data": [
      {
        "x": "HDL",
        "y": 55
      },
      {
        "x": "Normal Range",
        "y": 52.5
      }
    ],
    "title": "HDL Cholesterol",
    "xlabel": "Measurement",
    "ylabel": "mg/dL",
    "referenceLines": {
      "Normal Range": 52.5
    }
  }
}
2025-02-04 01:01:44,191 - werkzeug - INFO - 172.31.128.16 - - [04/Feb/2025 01:01:44] "GET / HTTP/1.1" 200 -
file:///home/runner/workspace/VictoryChart.js:16
  const referenceLineComponents = (referenceLines || []).map((line, index) => (
                                                         ^

TypeError: (referenceLines || []).map is not a function
    at ChartComponent (file:///home/runner/workspace/VictoryChart.js:16:58)
    at react-stack-bottom-frame (/home/runner/workspace/node_modules/react-dom/cjs/react-dom-server-legacy.node.development.js:8524:18)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom-server-legacy.node.development.js:4524:19)
    at renderElement (/home/runner/workspace/node_modules/react-dom/cjs/react-dom-server-legacy.node.development.js:4959:23)
    at retryNode (/home/runner/workspace/node_modules/react-dom/cjs/react-dom-server-legacy.node.development.js:5613:22)
    at performWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom-server-legacy.node.development.js:6416:19)
    at startWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom-server-legacy.node.development.js:7027:7)
    at renderToStringImpl (/home/runner/workspace/node_modules/react-dom/cjs/react-dom-server-legacy.node.development.js:7111:7)
    at process.env.NODE_ENV.exports.renderToString (/home/runner/workspace/node_modules/react-dom/cjs/react-dom-server-legacy.node.development.js:8566:14)
    at file:///home/runner/workspace/render.js:13:32

Node.js v20.18.1
2025-02-04 01:01:44,508 - graph_utils - ERROR - Failed to render graph: Command '['node', 'render.js']' returned non-zero exit status 1.
2025-02-04 01:01:44,509 - __main__ - ERROR - Graph generation/upload failed:
2025-02-04 01:01:44,509 - __main__ - ERROR - Error type: CalledProcessError
2025-02-04 01:01:44,509 - __main__ - ERROR - Error message: Command '['node', 'render.js']' returned non-zero exit status 1.
2025-02-04 01:01:44,510 - __main__ - ERROR - Traceback: Traceback (most recent call last):
  File "/home/runner/workspace/main.py", line 216, in send_rcs_message
    img_b64 = generate_graph(g_type, g_data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/graph_utils.py", line 70, in generate_graph
    subprocess.run(['node', 'render.js'], check=True)
  File "/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['node', 'render.js']' returned non-zero exit status 1.